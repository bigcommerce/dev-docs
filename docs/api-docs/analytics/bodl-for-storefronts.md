# Big Open Data Layer for Storefront Analytics

The Big Open Data Layer (shortened as BODL, pronounced 'Bottle') is a JavaScript object that allows you to transport data from a Bigcommerce-hosted storefront to third-party analytic providers. This data layer exposes storefront data points to BigCommerce and third-party analytics integrations. Using BODL on a BigCommerce-hosted storefront ensures that analytics providers have access to consistent, clean page data and makes a site more efficient. Because BODL consolidates data of interest and presents it as a package, each analytics script does not need to independently fetch the same data.

BODL currently transports data for storefront events that are triggered by a shopper. BigCommerce checks your storefront for a BODL instance once per page render. To ensure that the analytics providers you've chosen have the complete and correct set of data points they require, a merchant must enable BODL through the store control panel so that each storefront page window subscribes to BODL events. As a developer, you can then access storefront data after a shopper triggers a BODL event. 

This guide shows you how to get started using BODL data in your integration. The first section describes the standard BODL schema after shopper triggers a specified event, so that you can see how BODL organizes information for your integration to capture. The remainder provides example scripts for using the standard BODL object, displaying BODL parameters into the browser console or supplying data to third-party analytics engines. You can inject JavaScript snippets into a BigCommerce-hosted storefront using the Script Manager or the Scripts API.

## Standard BODL schema

BODL transports data after shoppers trigger storefront events. The following are supported storefront events:
- Start checkout
- Purchase order 

### BODL schema after start checkout event

When the shopper clicks on the button to initiate a checkout process, the following fields appear in the BODL object:

| Event field | Type | Description | BigC data map |
|:---|:---|:---|:---|
| `event_id` | string | Unique ID for each event instance. | Unique event ID generated by BigCommerce. Not needed for GA4. |
| `channel_id` | string | The BigCommerce channel ID. | Channel ID of the channel where checkout is taking place. Not needed for GA4. |
| `currency` | string | [ISO-4217 currency code](https://en.wikipedia.org/wiki/ISO_4217) of the order.  BC tracks currency for a cart and not for each line item within the cart. | [Get a cart](/api-reference/store-management/carts/cart/getacart) <br> `currency.code` |
| `cart_value` | number | Final value of cart after taxes, discounts, and coupons are applied. | [Get a cart](/api-reference/store-management/carts/cart/getacart) <br> `cart_amount` |
| `coupon_codes[]` | array of strings | Coupon codes applied to the cart. | [Get a cart](/api-reference/store-management/carts/cart/getacart) <br> `coupons.code` |
| `line_items[]` | array of `line_item` objects | Items being checked out. | See [line_item](#common-event-fields-line_item-object) object for event fields |

### BODL schema after purchase order event

When the shopper clicks a button to finalize a purchase, the following fields appear in the BODL object:

| Event field | Type | Description | BigC data map |
|:---|:---|:---|:---|
| `event_id` | string | Unique ID for each event instance. | Unique event ID generated by BigCommerce. Not needed for GA4. |
| `channel_id` | string | The BigCommerce channel ID. | Channel ID of the channel where checkout is taking place. Not needed for GA4. |
| `currency` | string | [ISO-4217 currency code](https://en.wikipedia.org/wiki/ISO_4217) of the order. | [Get a checkout](/api-reference/store-management/checkouts/checkout/checkoutsbycheckoutidget) <br>  `data.cart.currency.code` |
| `order_id` | string | Unique transaction ID generated by BigCommerce to prevent duplicate purchase records. | [Get a checkout](/api-reference/store-management/checkouts/checkout/checkoutsbycheckoutidget) <br> `data.order_id` |
| `cart_value` | number | Final value of cart after taxes, discounts, and coupons are applied. | [Get a checkout](/api-reference/store-management/checkouts/checkout/checkoutsbycheckoutidget) <br> `data.cart.cart_amount_inc_tax` | 
| `coupon_codes[]` | array of strings | Coupon codes applied to the purchase. | [Get a checkout](/api-reference/store-management/checkouts/checkout/checkoutsbycheckoutidget) <br> `data.cart.coupons[].code` |
| `shipping_cost` | number | Total shipping cost including tax. | [Get a checkout](/api-reference/store-management/checkouts/checkout/checkoutsbycheckoutidget) <br> `data.shipping_cost_total_inc_tax` |
| `tax` | number | Tax incurred. | [Get a checkout](/api-reference/store-management/checkouts/checkout/checkoutsbycheckoutidget) <br> `data.tax_total` |
| `line_items[]` | array of `line_item` objects | Items being purchased. | See [line_item](#common-event-fields-line_item-object) object for event fields |

### Common event fields: line_item object

The `line_item` object has many common fields for browser events. The `line_item` object includes the following fields:   

| Web browser event fields | Type | Description | BigC data map | GA4 data map | Required for GA4? |
| - | - | - | - | - | - |
| `product_id` | string | ID of the product. | [Get a product](/api-reference/store-management/catalog/products/getproductbyid) <br> `data.id` | `item_id` <br> <br> Populate this field using the following order of availability: <br> - Product SKU <br> - Product ID | Y |
| `product_name` | string | Name of the product. | [Get a product](/api-reference/store-management/catalog/products/getproductbyid) <br> `data.name` | `item_name` | Y |
| `sku` | string | User-defined SKU for the product or variant (whichever is applied). | [Get a product](/api-reference/store-management/catalog/products/getproductbyid) <br> `data.sku` or `data.variants.sku` | `item_id`<br> <br> Populate this field using the following order of availability: <br> - Product SKU <br> - Product ID | Y |
| `base_price` | number | Price of product. Default price in the control panel. The price should include or exclude tax, based on the store settings. | [Get a product](/api-reference/store-management/catalog/products/getproductbyid) <br> `data.price` | - | N |
| `sale_price` | number | Price of product after sale. The price should include or exclude tax, based on the store settings. | [Get a product](/api-reference/store-management/catalog/products/getproductbyid) <br> `data.sale_price` | Not sent to Google Analytics. | - |
| `retail_price` | number | Maximum suggested retail price (MSRP). The price should include or exclude tax, based on the store settings. | [Get a product](/api-reference/store-management/catalog/products/getproductbyid) <br> `data.retail_price` | Not sent to Google Analytics. | - | 
| `purchase_price` | number | Final price of product that the shopper actually pays before taxes and other charges. Equals the `base_price` unless there is a `sale_price`. The price should include or exclude tax, based on the store settings. | [Get a product](/api-reference/store-management/catalog/products/getproductbyid) <br> `data.sale_price` or `data.base_price` | - | Y |
| `quantity` | number | Number of items of product purchased. | [Get a cart](/api-reference/store-management/carts/cart/getacart) <br> `data.line_items.physical_items.quantity` or <br> `data.line_items.digital_items.quantity` | `quantity` | N |
| `currency` | string | [ISO-4217 currency code](https://en.wikipedia.org/wiki/ISO_4217) for the transaction. | [Get a checkout](/api-reference/store-management/checkouts/checkout/checkoutsbycheckoutidget) <br>  `data.cart.currency.code`  | `currency` | N |
| `discount` | number | Discount applied to purchase. | [Get a checkout](/api-reference/store-management/checkouts/checkout/checkoutsbycheckoutidget) <br> `data.cart.discount_amount` | `discount` | N |
| `index` | integer | Position of item in a list. | - | `index` | N |
| `brand_name` | string | Brand name. | [Get a product](/api-reference/store-management/catalog/products/getproductbyid) <br> `data.brand_name` | `brand` | N |
| `category_names[]` | array | Category names. | [Get a product](/api-reference/store-management/catalog/products/getproductbyid) <br> `data.categories[]` | `item_category` | N |

## Using BODL 

### Display BODL parameters in the browser console 

### Transport data to a third-party analytic provier 

The following is an example of how to supply data from BODL to a third-party analytic provider (GA4). This script is an example usage of BODL, as methods and syntax vary between analytics engine providers. 

## Resources