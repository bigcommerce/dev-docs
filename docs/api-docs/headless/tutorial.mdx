# Headless Tutorial
This tutorial will walk you through creating a cart, checkout, an order, and processing a payment for a headless storefront. 

This article assumes you have familiarity with the following concepts:

* Creating a channel and channel site.
* Retrieving product data using the GraphQL Storefront API calls 


### Prerequisites

* Store API credentials with the following permissions.
	- **Carts:** `Modify`
	- **Checkout:** `Modify`
	- **Orders:** `Modify`
	- **Products:** `Read Only`

For more information, see [OAuth Scopes](/api-docs/getting-started/api-accounts#oauth-scopes).

## Creating a cart

### Step 1: Generate the cart ID
To generate the cart ID, send a request to the [create a cart](/docs/rest-management/carts/carts-single#create-a-cart) endpoint. The response will contain the `id`, which we will use as the `cart_id`.

<Tabs items={['Request', 'Response']}>
  <Tab>
```json filename="Example request: Create a cart" showLineNumbers copy
POST https://api.bigcommerce.com/stores/{{store_hash}}/v3/carts
Accept: application/json
Content-Type: application/json
X-Auth-Token: {{ACCESS_TOKEN}}
{
  "customer_id": 0,
  "line_items": [
    {
      "quantity": 2,
      "product_id": 120,
      "list_price": 15,
      "name": "mug"
    }
  ],
  "channel_id": 1,
  "currency": {
    "code": "USD"
  },
  "locale": "en-US"
}
```
</Tab>
  <Tab>
  ```json filename="Example response: Create a cart" showLineNumbers copy
  {
    "data": {
        "id": "3cae6525-d0e8-4252-afec-0890fbb710c5",
        "customer_id": 0,
        "channel_id": 1,
        "email": "",
        "currency": {
            "code": "USD"
        },
        "tax_included": false,
        "base_amount": 30,
        "discount_amount": 4.5,
        "cart_amount": 25.5,
        "coupons": [],
        "line_items": {
            "physical_items": [
                {
                    "id": "ca9ef0d1-1da9-48e5-a505-7051eb575432",
                    "parent_id": null,
                    "variant_id": 118,
                    "product_id": 120,
                    "sku": "SM-13",
                    "name": "mug",
                    "url": "https://arabic-store.mybigcommerce.com/bigcommerce-coffee-mug/",
                    "quantity": 2,
                    "taxable": true,
                    "image_url": "https://cdn11.bigcommerce.com/r-4b20dad619e29ebf3490f7f35369a8220637ce48/themes/ClassicNext/images/ProductDefault.gif",
                    "coupons": [],
                    "discount_amount": 0,
                    "coupon_amount": 0,
                    "original_price": 15,
                    "list_price": 15,
                    "sale_price": 13.86,
                    "extended_list_price": 30,
                    "extended_sale_price": 27.72,
                    "is_require_shipping": true,
                    "is_mutable": true
                }
            ],
            "digital_items": [],
            "gift_certificates": [],
            "custom_items": []
        },
        "created_time": "2023-09-28T20:30:33+00:00",
        "updated_time": "2023-09-28T20:30:33+00:00",
        "locale": "en-US"
    },
    "meta": {}
}
```
  </Tab>
  </Tabs>

  ### Step 2: Generate the redirect URLs

To generate the redirect URLs, send a POST request to the [create cart redirect URL](https://developer.bigcommerce.com/docs/rest-management/carts/redirects#create-cart-redirect-url) endpoint. You will need to use the cart ID generated in [step 1](#creating-a-cart) above. The response will contain the `cart_url` and the `checkout_url`. Use these URLs to redirect the customer to the BigCommerce-hosted cart or checkout pages.

<Tabs items={['Request', 'Response']}>
  <Tab>
```json filename="Example request: Create cart redirect URLs" showLineNumbers copy
POST https://api.bigcommerce.com/stores/{{store_hash}}/v3/carts/{cartId}/redirect_urls
Accept: application/json
Content-Type: application/json
X-Auth-Token: {{ACCESS_TOKEN}}
{}
```
</Tab>
<Tab>
  ```json filename="Example response: Create cart redirect URLs" showLineNumbers copy
  {
    "data": {
        "cart_url": "https://test-store.mybigcommerce.com/cart.php?action=load&id=3cae6525-d0e8-4252-afec-0890fbb710c5&token=888dbf8bc89d5bc925ed40d39996387574f8deceaf759c64c101679d1f164f4f",
        "checkout_url": "https://test-store.mybigcommerce.com/cart.php?action=loadInCheckout&id=3cae6525-d0e8-4252-afec-0890fbb710c5&token=888dbf8bc89d5bc925ed40d39996387574f8deceaf759c64c101679d1f164f4f",
        "embedded_checkout_url": "https://test-store.mybigcommerce.com/cart.php?embedded=1&action=loadInCheckout&id=3cae6525-d0e8-4252-afec-0890fbb710c5&token=888dbf8bc89d5bc925ed40d39996387574f8deceaf759c64c101679d1f164f4f"
    },
    "meta": {}
}
```
</Tab>
</Tabs>

## Creating a checkout

In this section, we will add a billing address to your checkout. You must have a `checkoutID`. The `checkoutID` is the same as the `cart_id` you generated in [step 1](#creating-a-cart) of creating a cart. To add a billing address, send a POST request to the  [Add Checkout Billing Address](https://developer.bigcommerce.com/docs/rest-management/checkouts/checkout-billing-address#add-checkout-billing-address) endpoint.

<Tabs items={['Request', 'Response']}>
  <Tab>
```json filename="Example request: Add Checkout Billing Address" showLineNumbers copy
POST https://api.bigcommerce.com/stores/{{store_hash}}/v3/checkouts/{checkoutId}/billing-address
Accept: application/json
Content-Type: application/json
X-Auth-Token: {{ACCESS_TOKEN}}
{
  "first_name": "Test",
  "last_name": "User",
  "email": "Test.User@email.com",
  "company": "BigCommerce",
  "address1": "555 Main Street",
  "address2": "",
  "city": "Austin",
  "state_or_province": "TX",
  "state_or_province_code": "TX",
  "country_code": "US",
  "postal_code": "78701",
  "phone": "555-555-5555"
}
```
</Tab>
<Tab>
```json filename="Example response: Add Checkout Billing Address" showLineNumbers copy
{
    "data": {
        "id": "3cae6525-d0e8-4252-afec-0890fbb710c5",
        "cart": {
            "id": "3cae6525-d0e8-4252-afec-0890fbb710c5",
            "customer_id": 0,
            "channel_id": 1,
            "email": "Test.user@email.com",
            "currency": {
                "code": "USD"
            },
            "tax_included": false,
            "base_amount": 30,
            "discount_amount": 4.5,
            "cart_amount_inc_tax": 25.5,
            "cart_amount_ex_tax": 23.56,
            "coupons": [],
            "line_items": {
                "physical_items": [
                    {
                        "id": "ca9ef0d1-1da9-48e5-a505-7051eb575432",
                        "parent_id": null,
                        "variant_id": 118,
                        "product_id": 120,
                        "sku": "SM-13",
                        "name": "mug",
                        "url": "https://arabic-store.mybigcommerce.com/bigcommerce-coffee-mug/",
                        "quantity": 2,
                        "is_taxable": true,
                        "image_url": "https://cdn11.bigcommerce.com/r-4b20dad619e29ebf3490f7f35369a8220637ce48/themes/ClassicNext/images/ProductDefault.gif",
                        "coupons": [],
                        "discount_amount": 0,
                        "coupon_amount": 0,
                        "original_price": 15,
                        "list_price": 15,
                        "sale_price": 13.858823529412,
                        "extended_list_price": 30,
                        "extended_sale_price": 27.717647058824,
                        "is_require_shipping": true,
                        "gift_wrapping": null,
                        "is_mutable": true
                    }
                ],
                "digital_items": [],
                "gift_certificates": [],
                "custom_items": []
            },
            "created_time": "2023-09-28T20:30:33+00:00",
            "updated_time": "2023-09-29T15:46:12+00:00"
        },
        "billing_address": {
            "id": "6516f14419a81",
            "first_name": "Test",
            "last_name": "User",
            "email": "Test.user@email.com",
            "company": "BigCommerce",
            "address1": "555 Main Street",
            "address2": "",
            "city": "Austin",
            "state_or_province": "Texas",
            "state_or_province_code": "TX",
            "country": "United States",
            "country_code": "US",
            "postal_code": "78701",
            "phone": "555-555-5555",
            "custom_fields": []
        },
        "consignments": [],
        "taxes": [
            {
                "name": "Texas Tax",
                "amount": 1.94
            }
        ],
        "coupons": [],
        "order_id": null,
        "shipping_cost_total_inc_tax": 0,
        "shipping_cost_total_ex_tax": 0,
        "handling_cost_total_inc_tax": 0,
        "handling_cost_total_ex_tax": 0,
        "tax_total": 1.94,
        "subtotal_inc_tax": 30,
        "subtotal_ex_tax": 27.717647058823,
        "grand_total": 25.5,
        "created_time": "2023-09-28T20:30:33+00:00",
        "updated_time": "2023-09-29T15:46:12+00:00",
        "customer_message": "",
        "fees": []
    },
    "meta": {}
}
```
</Tab>
</Tabs>

Now that you have transformed your headless cart into a proper checkout with a billing address, you can add a consignment with a shipping address, line items, and a shipping option. You can do so by following this two-step process:

### Step 1: Add a new consignment to the checkout

Send a `POST` request to the [Add Consignment to Checkout](/docs/rest-management/checkouts/checkout-consignments#add-consignment-to-checkout) endpoint. Append the `include=consignments.available_shipping_options` query parameter to your `POST` request to return `available_shipping_options` (required for step two).

<Tabs items={['Request', 'Response']}>
  <Tab>
```http filename="Example request: Add Consignment to checkout" showLineNumbers copy
POST https://api.bigcommerce.com/stores/{store_hash}/v3/checkouts/{checkoutId}/consignments?include=consignments.available_shipping_options
Accept: application/json
Content-Type: application/json
X-Auth-Token: {{ACCESS_TOKEN}}
[
  {
    "address": {
      "first_name": "Test",
      "last_name": "User",
      "email": "Test.User@example.com",
      "company": "BigCommerce",
      "address1": "555 Main Street",
      "address2": "",
      "city": "Austin",
      "state_or_province": "Texas",
      "state_or_province_code": "TX",
      "country_code": "US",
      "postal_code": "78701",
      "phone": "555-555-5555"
    },
    "line_items": [
      {
        "item_id": "ca9ef0d1-1da9-48e5-a505-7051eb575432",
        "quantity": 2
      }
    ],
    "pickup_option": {
      "pickup_method_id": 1
    }
  }
]
```
</Tab>
<Tab>
```json filename="Example response: Add Consignment to checkout" showLineNumbers copy
{
    "data": {
        "id": "3cae6525-d0e8-4252-afec-0890fbb710c5",
        "cart": {
            "id": "3cae6525-d0e8-4252-afec-0890fbb710c5",
            "customer_id": 0,
            "channel_id": 1,
            "email": "Test.user@email.com",
            "currency": {
                "code": "USD"
            },
            "tax_included": false,
            "base_amount": 30,
            "discount_amount": 4.5,
            "cart_amount_inc_tax": 25.5,
            "cart_amount_ex_tax": 23.56,
            "coupons": [],
            "line_items": {
                "physical_items": [
                    {
                        "id": "ca9ef0d1-1da9-48e5-a505-7051eb575432",
                        "parent_id": null,
                        "variant_id": 118,
                        "product_id": 120,
                        "sku": "SM-13",
                        "name": "mug",
                        "url": "https://arabic-store.mybigcommerce.com/bigcommerce-coffee-mug/",
                        "quantity": 2,
                        "is_taxable": true,
                        "image_url": "https://cdn11.bigcommerce.com/r-4b20dad619e29ebf3490f7f35369a8220637ce48/themes/ClassicNext/images/ProductDefault.gif",
                        "coupons": [],
                        "discount_amount": 0,
                        "coupon_amount": 0,
                        "original_price": 15,
                        "list_price": 15,
                        "sale_price": 13.858823529412,
                        "extended_list_price": 30,
                        "extended_sale_price": 27.717647058824,
                        "is_require_shipping": true,
                        "gift_wrapping": null,
                        "is_mutable": true
                    }
                ],
                "digital_items": [],
                "gift_certificates": [],
                "custom_items": []
            },
            "created_time": "2023-09-28T20:30:33+00:00",
            "updated_time": "2023-09-29T16:34:35+00:00"
        },
        "billing_address": {
            "id": "6516f14419a81",
            "first_name": "Test",
            "last_name": "User",
            "email": "Test.user@email.com",
            "company": "BigCommerce",
            "address1": "555 Main Street",
            "address2": "",
            "city": "Austin",
            "state_or_province": "Texas",
            "state_or_province_code": "TX",
            "country": "United States",
            "country_code": "US",
            "postal_code": "78701",
            "phone": "555-555-5555",
            "custom_fields": []
        },
        "consignments": [
            {
                "id": "6516fc9bbf6ef",
                "shipping_cost_inc_tax": 0,
                "shipping_cost_ex_tax": 0,
                "handling_cost_inc_tax": 0,
                "handling_cost_ex_tax": 0,
                "coupon_discounts": [],
                "discounts": [],
                "line_item_ids": [
                    "ca9ef0d1-1da9-48e5-a505-7051eb575432"
                ],
                "shipping_address": {
                    "first_name": "",
                    "last_name": "",
                    "email": "",
                    "company": "",
                    "address1": "13409 GENT DR",
                    "address2": "",
                    "city": "AUSTIN",
                    "state_or_province": "Texas",
                    "state_or_province_code": "TX",
                    "country": "United States",
                    "country_code": "US",
                    "postal_code": "78729",
                    "phone": "5129247111",
                    "custom_fields": []
                },
                "address": {
                    "first_name": "",
                    "last_name": "",
                    "email": "",
                    "company": "",
                    "address1": "13409 GENT DR",
                    "address2": "",
                    "city": "AUSTIN",
                    "state_or_province": "Texas",
                    "state_or_province_code": "TX",
                    "country": "United States",
                    "country_code": "US",
                    "postal_code": "78729",
                    "phone": "5129247111",
                    "custom_fields": []
                },
                "selected_pickup_option": {
                    "pickup_method_id": 1
                },
                "available_shipping_options": [
                    {
                        "id": "6ded13392879983ee32a3563f5fa6a7b",
                        "type": "shipping_pickupinstore",
                        "description": "Pickup In Store",
                        "image_url": "",
                        "cost": 0,
                        "transit_time": "",
                        "additional_description": ""
                    },
                    {
                        "id": "4d0bbe7bc107882751ef27f0f072c2ae",
                        "type": "fixedshipping",
                        "description": "Fixed Shipping",
                        "image_url": "",
                        "cost": 20,
                        "transit_time": "",
                        "additional_description": ""
                    }
                ]
            }
        ],
        "taxes": [
            {
                "name": "Texas Tax",
                "amount": 1.94
            }
        ],
        "coupons": [],
        "order_id": null,
        "shipping_cost_total_inc_tax": 0,
        "shipping_cost_total_ex_tax": 0,
        "handling_cost_total_inc_tax": 0,
        "handling_cost_total_ex_tax": 0,
        "tax_total": 1.94,
        "subtotal_inc_tax": 30,
        "subtotal_ex_tax": 27.717647058823,
        "grand_total": 25.5,
        "created_time": "2023-09-28T20:30:33+00:00",
        "updated_time": "2023-09-29T16:34:35+00:00",
        "customer_message": "",
        "fees": []
    },
    "meta": {}
}
```
</Tab>
</Tabs>
The response will contain an array of `available_shipping_options`. You will use one of the available shipping options to update the consignment in the next step.

```json filename="available shipping options" showLineNumbers copy
"available_shipping_options": [
                    {
                        "id": "6ded13392879983ee32a3563f5fa6a7b",
                        "type": "shipping_pickupinstore",
                        "description": "Pickup In Store",
                        "image_url": "",
                        "cost": 0,
                        "transit_time": "",
                        "additional_description": ""
                    },
                    {
                        "id": "4d0bbe7bc107882751ef27f0f072c2ae",
                        "type": "fixedshipping",
                        "description": "Fixed Shipping",
                        "image_url": "",
                        "cost": 20,
                        "transit_time": "",
                        "additional_description": ""
                    }
                ]
         }
        ],
```

### Step 2: Update the consignment

Use one of the available shipping options to update the consignment you created in [Step 1](#creating-a-checkout) of creating a checkout.
Send a `PUT` request to the [Update Checkout Consignment](/docs/rest-management/checkouts/checkout-consignments#update-checkout-consignment) endpoint.

<Tabs items={['Request', 'Response']}>
  <Tab>
```http filename="Example request: Update checkout consignment" showLineNumbers copy
PUT https://api.bigcommerce.com/stores/{store_hash}/v3/checkouts/{checkoutId}/consignments/{consignmentId}
Accept: application/json
Content-Type: application/json
X-Auth-Token: {{ACCESS_TOKEN}}
[
  {
    "address": {
      "first_name": "Test",
      "last_name": "User",
      "email": "newTestEmail@example.com",
      "company": "BigCommerce",
      "address1": "555 Main Street",
      "address2": "",
      "city": "Austin",
      "state_or_province": "Texas",
      "state_or_province_code": "TX",
      "country_code": "US",
      "postal_code": "78701",
      "phone": "555-555-5555",
      "custom_fields": [
        {
          "field_id": "string",
          "field_value": "string"
        }
      ]
    },
    },
    "line_items": [
      {
        "item_id": "ca9ef0d1-1da9-48e5-a505-7051eb575432",
        "quantity": 2
      }
    ],
    "shipping_option_id": "6ded13392879983ee32a3563f5fa6a7b",
    "pickup_option": {
      "pickup_method_id": 1
    }
  }
]
```
</Tab>
<Tab>
