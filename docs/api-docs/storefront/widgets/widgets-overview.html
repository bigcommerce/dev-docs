<!DOCTYPE html>
    <html>
    <head>
        <meta http-equiv="Content-type" content="text/html;charset=UTF-8">
        <title>Widgets API</title>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/katex.min.css" integrity="sha384-9eLZqc9ds8eNjO3TmqPeYcDj8n+Qfa4nuSiGYa6DjLNcv9BtN69ZIulL9+8CqC9Y" crossorigin="anonymous">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/markdown.css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/highlight.css">
        <link href="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.css" rel="stylesheet" type="text/css">
        <style>
.task-list-item { list-style-type: none; } .task-list-item-checkbox { margin-left: -20px; vertical-align: middle; }
</style>
        <style>
            body {
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe WPC', 'Segoe UI', 'Ubuntu', 'Droid Sans', sans-serif;
                font-size: 14px;
                line-height: 1.6;
            }
        </style>
        
        <script src="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.js"></script>
    </head>
    <body>
        <h1 id="widgets-api">Widgets API</h1>
<div class="otp" id="no-index">
<h3 id="on-this-page">On this page</h3>
<ul>
<li><a href="#regions">Regions</a></li>
<li><a href="#widget-templates">Widget templates</a></li>
<li><a href="#widgets">Widgets</a></li>
<li><a href="#placements">Placements</a></li>
<li><a href="#placements-and-widgets">Placements and Widgets</a></li>
<li><a href="#widgets-on-the-storefront">Widgets on the Storefront</a></li>
<li><a href="#definitions">Definitions</a></li>
<li><a href="#resources">Resources</a></li>
</ul>
</div>
<p>The Widgets API allows developers to programmatically associate content with regions on a BigCommerce storefront. The content can consist of HTML, CSS, and JavaScript, and the API supports configuration via <a href="https://handlebarsjs.com/">Handlebars</a> variables. It can support many types of content such as YouTube Videos, image sliders, and chat apps.</p>
<p>Some benefits are:</p>
<ul>
<li>Inject modular, reusable blocks of content inside new and existing store pages</li>
<li>Build tools that allow non-technical users to control content without editing theme files</li>
<li>Target specific products, categories or brands with widgets</li>
</ul>
<p>In this article, we are going to review all the components that make a widget. Then, we’ll use what we’ve learned to create a widget.</p>
<h2 id="regions">Regions</h2>
<p><a href="https://developer.bigcommerce.com/api-reference/storefront/widgets-api/regions/getcontentregions">Regions</a> are specific locations in the Stencil theme files where you can place a widget. A region is added at the file level using the format {{{region name=&quot;...&quot;}}}. A region can be named however you like, but it is best practice to give it a name that is descriptive of the location and function. A theme file can have as many regions as you want, with more than one widget assigned to the region and the <a href="/api-docs/storefront/widgets/widgets-overview#widgets_placements">Placement</a> <code>sort_order</code> controlling how the widgets appear on the storefront.</p>
<p><img src="file://///s3.amazonaws.com/user-content.stoplight.io/6012/1551970794664" alt="Content Region" title="Content Region"></p>
<p><img src="file://///s3.amazonaws.com/user-content.stoplight.io/6012/1551970767918" alt="Content Region" title="Content Region"></p>
<p>Most themes in the BigCommerce marketplace come with predefined regions. It is best to use those first. By editing the theme and adding theme regions, updates will need to be managed manually.</p>
<h2 id="widget-templates">Widget templates</h2>
<p><a href="/api-reference/storefront/widgets-api/widget-template/getwidgettemplates">Widget Templates</a> are handlebars-enabled HTML templates which define the structure of the widget on a page. Widget Templates can use the built in handlebar helpers such as {{if}} and {{each}}. Using the helpers allows for conditional logic to be built into the Widget Templates. Widget templates can be reused to build multiple widgets.</p>
<h3 id="widget-template-examples">Widget Template Examples</h3>
<p><strong>Simple List</strong></p>
<p>The Simple List template creates a list where each item in the list can have a different color. This example uses the <a href="https://handlebarsjs.com/api-reference/helpers.html">each block helper</a> in handlebars to loop through each item in the list and display it. The text and color are determined by handlebars placeholders that are set when creating the <a href="/api-reference/storefront/widgets-api/widget/createwidget">Widget</a>.</p>
<p>The list takes advantage of loops to display each list item on the page.</p>
<pre><code class="language-json"><div>{
  <span class="hljs-attr">"name"</span>: <span class="hljs-string">"Simple List"</span>,
  <span class="hljs-attr">"template"</span>: <span class="hljs-string">"&lt;ul&gt;{{#each list_items}}&lt;li style=\"color:{{color}};\"&gt;{{text}}&lt;/li&gt;{{/each}}&lt;/ul&gt;"</span>
}
</div></code></pre>
<p>The slider takes advantage of loops to display each slide on the page.</p>
<pre><code class="language-json"><div>{
<span class="hljs-attr">"name"</span>: <span class="hljs-string">"Simple Slider"</span>,
<span class="hljs-attr">"template"</span>: <span class="hljs-string">"&lt;ul class='slider'&gt;{{#each slides}}&lt;li class='slide'&gt;&lt;img src={{image}}'/&lt;/li&gt;{{/each}}&lt;/ul&gt;"</span>
}
</div></code></pre>
<h2 id="widgets">Widgets</h2>
<p><a href="/api-reference/storefront/widgets-api/widget/getwidgets">Widgets</a> are a unit of content that are placed on specific pages in a Stencil theme. Widgets are made of a widget configuration written in json and a widget template UUID. Widgets are rendered as part of the HTML on the storefront.</p>
<p><img src="file://///s3.amazonaws.com/user-content.stoplight.io/6012/1551971053085" alt="Widget" title="Storefront Widget"></p>
<h3 id="widget-configuration">Widget Configuration</h3>
<p>A Widget Configuration is the JSON payload that defines the content to be rendered with a given Widget Template. In the previous simple list example, the widget template loops over a list_items array using <code>{{#each}}</code>.</p>
<p>In the example below, we define the list_items array and supply values for the color and text of each list item. Since the template is created separately from the configuration, the same template UUID can be used multiple times for configuration.</p>
<p><strong>Widget Configuration Slides</strong></p>
<pre><code class="language-json"><div>{
  <span class="hljs-attr">"slides"</span>: [
    {<span class="hljs-attr">"image"</span>:<span class="hljs-string">"http://imageurl.com/nh35jn/test.png"</span>},
    {<span class="hljs-attr">"image"</span>:<span class="hljs-string">"http://imageurl.com/fdhdfh/test2.png"</span>}
  ]
}
</div></code></pre>
<p><strong>Widget Configuration List Items</strong></p>
<pre><code class="language-json"><div>{
	<span class="hljs-attr">"list_items"</span>: [{
			<span class="hljs-attr">"color"</span>: <span class="hljs-string">"orange"</span>,
			<span class="hljs-attr">"text"</span>: <span class="hljs-string">" Item One"</span>
		},
		{
			<span class="hljs-attr">"color"</span>: <span class="hljs-string">"blue"</span>,
			<span class="hljs-attr">"text"</span>: <span class="hljs-string">"Item Two"</span>
		}
	]
}

</div></code></pre>
<div class="HubBlock--callout">
<div class="CalloutBlock--info">
<div class="HubBlock-content">
<!-- theme:  -->
<h3 id="reusing-widget-configuration">Reusing Widget Configuration</h3>
<blockquote>
<p>Keep in mind that when reusing the <code>widget_configuration</code> the array will have to be called <code>list_items</code>. Otherwise, the widget will be created on the frontend, but there will be no data, so nothing is rendered. This is because <code>list_items</code> was defined when the widget template was originally created. The widget configuration name can be anything that is set when the widget_template is created.</p>
</blockquote>
</div>
</div>
</div>
<p><strong>List Items Example: Incorrect</strong></p>
<pre><code class="language-json"><div>{
  <span class="hljs-attr">"name"</span>: <span class="hljs-string">"Simple List"</span>,
  <span class="hljs-attr">"widget_configuration"</span>: {
    <span class="hljs-attr">"list_items_two"</span>: [
      {
        <span class="hljs-attr">"color"</span>: <span class="hljs-string">"orange"</span>,
        <span class="hljs-attr">"text"</span>: <span class="hljs-string">"Fifth item"</span>
      },
      {
        <span class="hljs-attr">"color"</span>: <span class="hljs-string">"blue"</span>,
        <span class="hljs-attr">"text"</span>: <span class="hljs-string">"Sixth item"</span>
      }
    ]
  },
  <span class="hljs-attr">"widget_template_uuid"</span>: <span class="hljs-string">"7bfb9a46-75cc-45bc-bf39-a6a43b77111f"</span>
}
</div></code></pre>
<p>The example above uses <code>list_items_two</code>, on line four, in the configuration which is not the same as <code>list_items</code>. If <code>list_items</code> has already been established during the initial configuration it must be set as <code>list_items</code> when being used again.</p>
<p><strong>List Items Example: Correct</strong></p>
<pre><code class="language-json"><div>{
  <span class="hljs-attr">"name"</span>: <span class="hljs-string">"Simple List"</span>,
  <span class="hljs-attr">"widget_configuration"</span>: {
    <span class="hljs-attr">"list_items"</span>: [
      {
        <span class="hljs-attr">"color"</span>: <span class="hljs-string">"orange"</span>,
        <span class="hljs-attr">"text"</span>: <span class="hljs-string">"Fifth item"</span>
      },
      {
        <span class="hljs-attr">"color"</span>: <span class="hljs-string">"blue"</span>,
        <span class="hljs-attr">"text"</span>: <span class="hljs-string">"Sixth item"</span>
      }
    ]
  },
  <span class="hljs-attr">"widget_template_uuid"</span>: <span class="hljs-string">"7bfb9a46-75cc-45bc-bf39-a6a43b77111f"</span>
}
</div></code></pre>
<h2 id="placements">Placements</h2>
<p><a href="/api-reference/storefront/widgets-api/placement/createplacement">Placements</a> determine the Region where the Widget is placed and in what order. The order of the placement is controlled by the <code>sort_order</code> when creating the placement.
A placement must be created in order to use a Widget on the storefront.</p>
<p>Placements can be used with <code>sort_order</code> and region to determine placement in a theme.</p>
<h3 id="placements-entityid">Placements <code>entity_id</code></h3>
<p>When creating a placement, there is an option to provide an <code>entity_id</code>.
This is the ID for a specific product, brand, category or page. For example, if a Widget needs to be on all product pages, leave <code>entity_id</code> blank. If the Widget should only appear on a certain product page, then assign <code>entity_id</code> the product ID.</p>
<p><code>entity_id</code> can be used with the following page types:</p>
<ul>
<li>pages/brand</li>
<li>pages/category</li>
<li>pages/page</li>
<li>pages/product</li>
</ul>
<h3 id="create-a-widget-placement-with-region">Create a Widget Placement with Region</h3>
<p>Below, the region and sort order have a value, so the widget will appear on the home page.</p>
<p><strong>Widget with Region</strong></p>
<pre><code class="language-json"><div>{
    <span class="hljs-attr">"widget_uuid"</span>: <span class="hljs-string">"2dfeb50e-5f8c-4df2-8525-a338091eed32"</span>,
    <span class="hljs-attr">"entity_id"</span>: <span class="hljs-string">"14"</span>,
    <span class="hljs-attr">"sort_order"</span>: <span class="hljs-number">1</span>,
    <span class="hljs-attr">"region"</span>: <span class="hljs-string">"home_header_image"</span>,
    <span class="hljs-attr">"template_file"</span>: <span class="hljs-string">"pages/home"</span>,
    <span class="hljs-attr">"status"</span>: <span class="hljs-string">"active"</span>
}
</div></code></pre>
<h3 id="create-a-widget-placement-without-a-region">Create a Widget Placement Without a Region</h3>
<p>Leaving the region and sort order off the request will return just the <code>placement_id</code> in the response, allowing for the widget to be rendered using Layouts.</p>
<p><strong>Widget Without a Region</strong></p>
<pre><code class="language-json"><div>{
    <span class="hljs-attr">"widget_uuid"</span>: <span class="hljs-string">"2dfeb50e-5f8c-4df2-8525-a338091eed32"</span>,
    <span class="hljs-attr">"entity_id"</span>: <span class="hljs-string">"14"</span>,
    <span class="hljs-attr">"template_file"</span>: <span class="hljs-string">"pages/home"</span>,
    <span class="hljs-attr">"status"</span>: <span class="hljs-string">"active"</span>
}
</div></code></pre>
<h2 id="placements-and-widgets">Placements and Widgets</h2>
<p>Placements determine which region widgets are located in and the order that they're displayed.</p>
<p>When creating a placement with a widget, the widget content takes the full region width. Any additional widgets that are placed onto the same region will be stacked above or below based on the <code>sort_order</code> property for each placement.</p>
<p>If you are creating marketplace applications that create placements directly, you don’t need to use the <code>sort_order</code> property.</p>
<h2 id="widgets-on-the-storefront">Widgets on the Storefront</h2>
<p>Widgets are rendered on the storefront as a data tag in the HTML.</p>
<ul>
<li>Region -- data-content-region</li>
<li>Widget -- data-widget-id</li>
<li>Placement does not generate a data tag. Only the Widget.</li>
</ul>
<p>A Region can contain multiple Placements with Widgets.</p>
<h2 id="definitions">Definitions</h2>
<table>
<thead>
<tr>
<th>Name</th>
<th>Definition</th>
</tr>
</thead>
<tbody>
<tr>
<td>Widgets</td>
<td>Widgets are the units of content to be placed on specific pages in a Stencil theme. Each widget is comprised of a widget configuration and a widget template. <em>There is a limit of <code>10,000</code> widgets per store.</em></td>
</tr>
<tr>
<td>Widget Templates</td>
<td>Widget Templates are Handlebars-enabled HTML templates which define the widget’s structure on a page. These templates can include conditional logic as well as looping. <em>There is a limit of <code>1,000</code> total custom widget templates per store. This does not include templates pre-provided by BigCommerce.</em></td>
</tr>
<tr>
<td>Placements</td>
<td>Placements are the records to track which widget appears on which page, and in what order.  Currently, placements can only exist on the following pages: </br>* pages/blog-post </br> * pages/blog</br>* pages/brand</br>* pages/brands</br>* pages/cart</br>* pages/category</br>* pages/home</br>* pages/page</br>* pages/product</br>* pages/search</br> <em>There is a limit of 75 placements per template file and <code>10,000</code> total placements per store.</em></td>
</tr>
<tr>
<td>Regions</td>
<td>Regions are specific spots in a Stencil template file where Widgets can be placed. Regions are defined at the theme file level using the following syntax: <code>{{{region name=&quot;...&quot;}}}</code>. There can be many widgets inside a given region, and these widgets can have an assigned sort order.</td>
</tr>
<tr>
<td>Widget Configuration</td>
<td>This is a JSON payload that contains data used when rendering the widget. Each widget has a configuration, and there is a 64kb limit on the size of the JSON. The widget configuration must be valid JSON, but we don’t enforce any additional requirement on the structure of the configuration.</td>
</tr>
</tbody>
</table>
<h2 id="resources">Resources</h2>
<h3 id="related-endpoints">Related Endpoints</h3>
<ul>
<li><a href="/api-reference/storefront/widgets-api">Widgets API</a></li>
<li><a href="/api-docs/storefront/widgets/widgets-tutorial">Widgets Tutorial</a></li>
<li><a href="/api-docs/storefront/widgets/widgets-code-samples">Wigets Code Samples</a></li>
</ul>

    </body>
    </html>