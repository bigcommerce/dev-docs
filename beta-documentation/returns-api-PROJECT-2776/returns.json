{
  "swagger": "2.0",
  "info": {
    "version": "0.0.1",
    "title": "Returns API",
    "description": "Returns API for BigCommerce"
  },
  "host": "api.bigcommerce.com",
  "basePath": "/stores/{store_hash}/v3",
  "schemes": [
    "https"
  ],
  "consumes": [
    "application/json"
  ],
  "produces": [
    "application/json"
  ],
  "tags": [
    {
      "name": "Return Requests"
    },
    {
      "name": "Settings"
    }
  ],
  "paths": {
    "/store/settings/returns": {
      "get": {
        "tags": [
          "Settings"
        ],
        "description": "Provides the configured returns settings",
        "produces": [
          "application/json"
        ],
        "responses": {
          "200": {
            "description": "The configured store settings relating to returns",
            "schema": {
              "type": "object",
              "properties": {
                "data": {
                  "$ref": "#/definitions/Settings"
                }
              }
            }
          }
        }
      }
    },
    "/orders/{id}/return-summary": {
      "get": {
        "tags": [
          "Return Requests"
        ],
        "description": "Provides a return-centric summary an order",
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "description": "The ID of the order for which a summary should be obtained",
            "required": true,
            "type": "integer",
            "format": "int64"
          }
        ],
        "responses": {
          "200": {
            "description": "A return-centric summary of the order",
            "schema": {
              "items": {
                "type": "object",
                "properties": {
                  "order_product_id": {
                    "type": "integer",
                    "format": "int64",
                    "description": "The ID of the order product"
                  },
                  "name": {
                    "type": "string",
                    "description": "The name of the order product"
                  },
                  "returnable_quantity": {
                    "type": "integer",
                    "description": "The maximum quantity of this item that can presently be requested for return"
                  },
                  "options": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {

                      },
                      "description": "An item available for return"
                    },
                    "description": "A list of options configured for the order product"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/orders/{id}/return-requests": {
      "post": {
        "tags": [
          "Return Requests"
        ],
        "description": "Creates a new return request",
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "description": "The ID of the order for which a return should be created",
            "required": true,
            "type": "integer",
            "format": "int64"
          },
          {
            "in": "body",
            "name": "return_request",
            "description": "Details of the return request",
            "required": true,
            "schema": {
              "$ref": "#/definitions/CreateReturnRequestReq"
            }
          }
        ],
        "produces": [
          "application/json"
        ],
        "responses": {
          "201": {
            "description": "Details of the return request",
            "schema": {
              "type": "object",
              "properties": {
                "data": {
                  "$ref": "#/definitions/GetReturnRequestResp"
                }
              }
            }
          }
        }
      }
    },
    "/return-requests/status-updates": {
      "post": {
        "tags": [
          "Return Requests"
        ],
        "parameters": [
          {
            "in": "body",
            "name": "status_updates",
            "description": "A collection of status updates to apply",
            "required": true,
            "schema": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/StatusUpdate"
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "A collection of return request summaries",
            "schema": {
              "properties": {
                "data": {
                  "$ref": "#/definitions/UpdateStatusesResp"
                },
                "errors": {
                  "type": "array",
                  "items": {
                    "$ref": "#/definitions/Problem"
                  }
                },
                "meta": {
                  "$ref": "#/definitions/BatchOperationMeta"
                }
              }
            }
          }
        }
      }
    },
    "/return-requests": {
      "get": {
        "tags": [
          "Return Requests"
        ],
        "description": "Provides a list of return requests",
        "parameters": [
          {
            "in": "query",
            "name": "id",
            "type": "integer",
            "format": "int64"
          },
          {
            "in": "query",
            "name": "order_id",
            "type": "integer",
            "format": "int64"
          },
          {
            "in": "query",
            "name": "customer_id",
            "type": "integer",
            "format": "int64"
          },
          {
            "in": "query",
            "name": "status",
            "type": "string",
            "enum": ["CLOSED", "OPEN", "REMOVED"],
            "format": "int64"
          },
          {
            "name": "page",
            "description": "Specifies the page number in a limited (paginated) list of return requests",
            "in": "query",
            "type": "integer"
          },
          {
            "name": "limit",
            "description": "Controls the number of items per page in a limited (paginated) list of products",
            "in": "query",
            "type": "integer"
          },
          {
            "name": "direction",
            "description": "Sort direction",
            "in": "query",
            "type": "string",
            "enum": [
              "asc",
              "desc"
            ]
          },
          {
            "name": "sort",
            "description": "The field name by which to sort results",
            "in": "query",
            "type": "string",
            "enum": [
              "id",
              "order_id",
              "date_modified"
            ]
          }
        ],
        "responses": {
          "200": {
            "description": "A list of return requests",
            "schema": {
              "type": "object",
              "properties": {
                "data": {
                  "type": "array",
                  "items": {
                    "$ref": "#/definitions/GetReturnRequestResp"
                  }
                },
                "meta": {
                  "type": "object",
                  "properties": {
                    "pagination": {
                      "$ref": "#/definitions/Pagination"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/return-requests/{id}/receipts": {
      "put": {
        "tags": [
          "Return Requests"
        ],
        "description": "Updates the received status of one or more return request items",
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "type": "integer",
            "required": true,
            "description": "The ID of the return request for which items are to be updated"
          },
          {
            "in": "body",
            "name": "receipts",
            "required": true,
            "schema": {
              "$ref": "#/definitions/UpdateReceiptsReq"
            }
          }
        ],
        "produces": [
          "application/json"
        ],
        "responses": {
          "200": {
            "description": "A collection of return request item summaries with updated receipt statuses",
            "schema": {
              "properties": {
                "data": {
                  "$ref": "#/definitions/UpdateReceiptsResp"
                },
                "errors": {
                  "type": "array",
                  "items": {
                    "$ref": "#/definitions/Problem"
                  }
                },
                "meta": {
                  "$ref": "#/definitions/BatchOperationMeta"
                }
              }
            }
          }
        }
      }
    },
    "/return-requests/{id}/reviews": {
      "put": {
        "tags": [
          "Return Requests"
        ],
        "description": "Updates the reviewed status of one or more return request items",
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "type": "integer",
            "required": true,
            "description": "The ID of the return request for which items are to be updated"
          },
          {
            "in": "body",
            "name": "reviews",
            "required": true,
            "schema": {
              "$ref": "#/definitions/UpdateReviewsReq"
            }
          }
        ],
        "produces": [
          "application/json"
        ],
        "responses": {
          "200": {
            "description": "A collection of return request item summaries with updated review statuses",
            "schema": {
              "properties": {
                "data": {
                  "$ref": "#/definitions/UpdateReviewsResp"
                },
                "errors": {
                  "type": "array",
                  "items": {
                    "$ref": "#/definitions/Problem"
                  }
                },
                "meta": {
                  "$ref": "#/definitions/BatchOperationMeta"
                }
              }
            }
          }
        }
      }
    }
  },
  "definitions": {
    "Settings": {
      "type": "object",
      "properties": {
        "reasons": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/Reason"
          }
        },
        "preferred_outcomes": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/PreferredOutcome"
          }
        }
      }
    },
    "Reason": {
      "type": "object",
      "properties": {
        "id": {
          "type": "integer",
          "format": "int64"
        },
        "label": {
          "type": "string",
          "description": "A description of the reason"
        },
        "is_archived": {
          "type": "boolean",
          "description": "Indicates whether or not the reason has been archived"
        }
      }
    },
    "PreferredOutcome": {
      "type": "object",
      "properties": {
        "id": {
          "type": "integer",
          "format": "int64"
        },
        "label": {
          "type": "string",
          "description": "A description of the outcome"
        },
        "is_archived": {
          "type": "boolean",
          "description": "Indicates whether or not the outcome has been archived"
        }
      }
    },
    "CreateReturnRequestReq": {
      "type": "object",
      "required": ["items"],
      "properties": {
        "items": {
          "description": "A list of items to be returned",
          "type": "array",
          "items": {
            "$ref": "#/definitions/CreateReturnRequestReqItem"
          }
        },
        "comment": {
          "description": "A comment provided to the merchant for review",
          "type": "string"
        }
      }
    },
    "CreateReturnRequestReqItem": {
      "type": "object",
      "required": [
        "order_product_id",
        "quantity",
        "preferred_outcome_id",
        "reason_id"
      ],
      "properties": {
        "order_product_id": {
          "type": "integer",
          "format": "int64"
        },
        "quantity": {
          "type": "integer",
          "minimum": 1
        },
        "preferred_outcome_id": {
          "type": "integer",
          "format": "int64"
        },
        "reason_id": {
          "type": "integer",
          "format": "int64"
        }
      }
    },
    "GetReturnRequestResp": {
      "type": "object",
      "properties": {
        "items": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/GetReturnRequestRespItem"
          }
        },
        "customer": {
          "type": "object",
          "properties": {
            "id": {
              "type": "integer",
              "format": "int64"
            },
            "email": {
              "type": "string",
              "format": "email"
            }
          }
        },
        "comment": {
          "type": "string",
          "description": "A comment provided to the merchant for review"
        },
        "status": {
          "$ref": "#/definitions/Status"
        },
        "date_modified": {
          "type": "string",
          "format": "date-time"
        }
      }
    },
    "GetReturnRequestRespItem": {
      "type": "object",
      "properties": {
        "id": {
          "type": "integer",
          "format": "int64",
          "description": "The unique identifier of this return request item"
        },
        "order_product_id": {
          "type": "integer",
          "format": "int64",
          "description": "The ID of the order product associated with this item"
        },
        "quantity": {
          "type": "integer",
          "description": "The quantity of items for which a return was requested"
        },
        "value": {
          "type": "string",
          "format": "decimal",
          "description": "The value of the item"
        },
        "preferred_outcome": {
          "type": "object",
          "properties": {
            "id": {
              "type": "integer",
              "format": "int64",
              "description": "Unique identifier of the preferred outcome"
            }
          }
        },
        "received_state": {
          "type": "object",
          "properties": {
            "received_quantity": {
              "type": "integer",
              "description": "The quantity of items marked as received by the merchant"
            },
            "pending_quantity": {
              "type": "integer",
              "description": "The quantity of items pending receipt by the merchant"
            }
          }
        },
        "review_state": {
          "type": "object",
          "properties": {
            "approved_quantity": {
              "type": "integer",
              "description": "The quantity of items approved for return by the merchant"
            },
            "pending_quantity": {
              "type": "integer",
              "description": "The quantity of items pending receipt by the merchant"
            }
          }
        }
      }
    },
    "StatusUpdate": {
      "type": "object",
      "properties": {
        "return_id": {
          "type": "integer",
          "format": "int64",
          "description": "The ID of the return request for which the status should be updated"
        },
        "new_status": {
          "$ref": "#/definitions/Status"
        }
      }
    },
    "Status": {
      "type": "string",
      "enum": ["CLOSED", "OPEN", "REMOVED"],
      "description": "The status of the return request"
    },
    "UpdateStatusesResp": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "format": "int64",
            "description": "The ID of the return request for which the status was updated"
          },
          "status": {
            "$ref": "#/definitions/Status"
          }
        }
      }
    },
    "Problem": {
      "type": "object",
      "properties": {
        "status": {
          "type": "integer",
          "description": "Status code of the problem"
        },
        "title": {
          "type": "string",
          "description": "A short description of the problem"
        },
        "type": {
          "type": "string",
          "format": "url",
          "description": "A resource describing the problem"
        }
      }
    },
    "BatchOperationMeta": {
      "type": "object",
      "properties": {
        "total": {
          "type": "integer",
          "description": "The total number of operations in the batch"
        },
        "success": {
          "type": "integer",
          "description": "The number of failed operations in the batch"
        },
        "failed": {
          "type": "integer",
          "description": "The number of failed operations in the batch"
        }
      }
    },
    "Pagination": {
      "type": "object",
      "properties": {
        "total": {
          "type": "integer",
          "description": "The total number of items in the collection"
        },
        "count": {
          "type": "integer",
          "description": "The number of items in the current page of results"
        },
        "per_page": {
          "type": "integer",
          "description": "The number of per page"
        },
        "current_page": {
          "type": "integer",
          "description": "The current page number"
        },
        "total_pages": {
          "type": "integer",
          "description": "The total number of pages"
        },
        "links": {
          "type": "object",
          "description": "Links to other resources relating to this collection",
          "properties": {
            "next": {
              "type": "string",
              "description": "The next resource in the collection"
            },
            "current": {
              "type": "string",
              "description": "The current resource"
            }
          }
        }
      }
    },
    "UpdateReceiptsReq": {
      "type": "array",
      "items": {
        "type": "object",
        "required": [
          "item_id",
          "received_quantity",
          "pending_quantity"
        ],
        "properties": {
          "item_id": {
            "type": "integer",
            "format": "int64",
            "description": "The ID of the item for which to update the received state"
          },
          "received_quantity": {
            "type": "integer",
            "description": "The quantity of items to be marked as received"
          },
          "pending_quantity": {
            "type": "integer",
            "description": "The quantity of items to be marked as pending"
          }
        }
      }
    },
    "UpdateReceiptsResp": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "item_id": {
            "type": "integer",
            "format": "int64",
            "description": "The ID of the item for which receipt status was updated"
          },
          "received_quantity": {
            "type": "integer",
            "format": "int64",
            "description": "The quantity of items marked as received"
          },
          "pending_quantity": {
            "type": "integer",
            "format": "int64",
            "description": "The quantity of items marked as pending"
          }
        }
      }
    },
    "UpdateReviewsReq": {
      "type": "array",
      "items": {
        "type": "object",
        "required": [
          "item_id",
          "authorized_quantity",
          "rejected_quantity",
          "pending_quantity"
        ],
        "properties": {
          "item_id": {
            "type": "integer",
            "format": "int64",
            "description": "The ID of the item for which to update the received state"
          },
          "authorized_quantity": {
            "type": "integer",
            "description": "The quantity of items to be marked as authorized"
          },
          "rejected_quantity": {
            "type": "integer",
            "description": "The quantity of items to be marked as rejected"
          },
          "pending_quantity": {
            "type": "integer",
            "description": "The quantity of items to be marked as pending"
          }
        }
      }
    },
    "UpdateReviewsResp": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "item_id": {
            "type": "integer",
            "format": "int64",
            "description": "The ID of the item for which receipt status was updated"
          },
          "authorized_quantity": {
            "type": "integer",
            "format": "int64",
            "description": "The quantity of items marked as authorized"
          },
          "rejected_quantity": {
            "type": "integer",
            "format": "int64",
            "description": "The quantity of items marked as rejected"
          },
          "pending_quantity": {
            "type": "integer",
            "format": "int64",
            "description": "The quantity of items marked as pending"
          }
        }
      }
    }
  }
}
